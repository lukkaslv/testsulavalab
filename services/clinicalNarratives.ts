
import { AnalysisResult, ClinicalNarrative, SystemicVector, Intervention } from '../types';
import { translations } from '../translations';

type Lang = 'ru' | 'ka';

const INTERVENTION_LIBRARY: Record<Lang, {
    systemic: Intervention[];
    confrontation: Intervention[];
    paradox: Intervention[];
    support: Intervention[];
}> = {
    ru: {
        systemic: [
            { type: 'SYSTEMIC_ORDER', text: "Ð¯ â€” ÑÑ‚Ð¾ Ñ, Ð° Ð²Ñ‹ â€” ÑÑ‚Ð¾ Ð²Ñ‹. Ð¯ Ð¾ÑÑ‚Ð°Ð²Ð»ÑÑŽ Ð²Ð°Ð¼ Ð²Ð°ÑˆÑƒ ÑÑƒÐ´ÑŒÐ±Ñƒ.", purpose: "Ð Ð°Ð·Ñ€Ñ‹Ð² Ð¿Ð°Ñ‚Ð¾Ð»Ð¾Ð³Ð¸Ñ‡ÐµÑÐºÐ¾Ð¹ Ð»Ð¾ÑÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸." },
            { type: 'SYSTEMIC_ORDER', text: "Ð¯ Ð´Ð°ÑŽ Ð¼ÐµÑÑ‚Ð¾ Ð²Ð°ÑˆÐµÐ¹ Ð±Ð¾Ð»Ð¸, Ð½Ð¾ Ñ Ð±Ð¾Ð»ÑŒÑˆÐµ Ð½Ðµ Ð±ÑƒÐ´Ñƒ Ð¿Ð»Ð°Ñ‚Ð¸Ñ‚ÑŒ Ð·Ð° Ð½ÐµÐµ ÑÐ²Ð¾ÐµÐ¹ Ð¶Ð¸Ð·Ð½ÑŒÑŽ.", purpose: "Ð¡Ð½ÑÑ‚Ð¸Ðµ Ð¸Ð´ÐµÐ½Ñ‚Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ð¸ Ñ Ð¶ÐµÑ€Ñ‚Ð²Ð¾Ð¹." },
            { type: 'SYSTEMIC_ORDER', text: "ÐœÐ°Ð¼Ð°, Ð¿Ð°Ð¿Ð°, Ð¿Ð¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð¿Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ñ‚Ðµ Ð½Ð° Ð¼ÐµÐ½Ñ Ñ Ð»ÑŽÐ±Ð¾Ð²ÑŒÑŽ, ÐµÑÐ»Ð¸ Ñ Ð±ÑƒÐ´Ñƒ Ð±Ð¾Ð³Ð°Ñ‡Ðµ Ð²Ð°Ñ.", purpose: "Ð¡Ð½ÑÑ‚Ð¸Ðµ Ð²Ð¸Ð½Ñ‹ Ð·Ð° ÑƒÑÐ¿ÐµÑ…." }
        ],
        confrontation: [
            { type: 'CONFRONTATION', text: "ÐŸÐ¾Ñ…Ð¾Ð¶Ðµ, Ð²Ð°ÑˆÐ° ÑÑ„Ñ„ÐµÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚ÑŒ â€” ÑÑ‚Ð¾ ÑÐ¿Ð¾ÑÐ¾Ð± Ð½Ðµ Ñ‡ÑƒÐ²ÑÑ‚Ð²Ð¾Ð²Ð°Ñ‚ÑŒ, ÐºÐ°Ðº Ð²Ð°Ð¼ ÑÑ‚Ñ€Ð°ÑˆÐ½Ð¾.", purpose: "Ð’ÑÐºÑ€Ñ‹Ñ‚Ð¸Ðµ ÐºÐ¾Ð¼Ð¿ÐµÐ½ÑÐ°Ñ†Ð¸Ð¸." },
            { type: 'CONFRONTATION', text: "Ð§Ñ‚Ð¾ Ð±ÑƒÐ´ÐµÑ‚, ÐµÑÐ»Ð¸ Ð²Ñ‹ Ð¿ÐµÑ€ÐµÑÑ‚Ð°Ð½ÐµÑ‚Ðµ ÑÐ¿Ð°ÑÐ°Ñ‚ÑŒ ÑÑ‚Ð¾Ð³Ð¾ Ñ‚ÐµÑ€Ð°Ð¿ÐµÐ²Ñ‚Ð° ÑÐ²Ð¾Ð¸Ð¼Ð¸ Ñ…Ð¾Ñ€Ð¾ÑˆÐ¸Ð¼Ð¸ Ð¾Ñ‚Ð²ÐµÑ‚Ð°Ð¼Ð¸?", purpose: "Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ Ð¿ÐµÑ€ÐµÐ½Ð¾ÑÐ¾Ð¼." }
        ],
        paradox: [
            { type: 'PARADOX', text: "ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ð½Ð° ÑÑ‚Ð¾Ð¹ Ð½ÐµÐ´ÐµÐ»Ðµ ÑÐ°Ð±Ð¾Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ ÑÐ²Ð¾Ð¹ ÑƒÑÐ¿ÐµÑ… ÐµÑ‰Ðµ ÑÑ„Ñ„ÐµÐºÑ‚Ð¸Ð²Ð½ÐµÐµ.", purpose: "Ð›ÐµÐ³Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ ÑÐ¾Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð»ÐµÐ½Ð¸Ñ." }
        ],
        support: [
            { type: 'SUPPORT', text: "Ð¯ Ð²Ð¸Ð¶Ñƒ Ñ‚Ð²Ð¾ÑŽ ÑƒÑÑ‚Ð°Ð»Ð¾ÑÑ‚ÑŒ. Ð¢Ñ‹ Ð½Ðµ Ð´Ð¾Ð»Ð¶ÐµÐ½ ÑÐ¿Ñ€Ð°Ð²Ð»ÑÑ‚ÑŒÑÑ Ð² Ð¾ÑÐ¾Ð·Ð½Ð°Ð½Ð½Ð¾Ð¼ Ð¾Ð´Ð¸Ð½Ð¾Ñ‡ÐµÑÑ‚Ð²Ðµ Ð¿Ñ€ÑÐ¼Ð¾ ÑÐµÐ¹Ñ‡Ð°Ñ.", purpose: "Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð´ÐµÑ„Ð¸Ñ†Ð¸Ñ‚Ð°." }
        ]
    },
    ka: {
        systemic: [
            { type: 'SYSTEMIC_ORDER', text: "áƒ›áƒ” áƒ›áƒ” áƒ•áƒáƒ , áƒ—áƒ¥áƒ•áƒ”áƒœ áƒ™áƒ˜ áƒ—áƒ¥áƒ•áƒ”áƒœ áƒ®áƒáƒ áƒ—. áƒ›áƒ” áƒ’áƒ˜áƒ¢áƒáƒ•áƒ”áƒ‘áƒ— áƒ—áƒ¥áƒ•áƒ”áƒœáƒ¡ áƒ‘áƒ”áƒ“áƒ¡.", purpose: "áƒžáƒáƒ—áƒáƒšáƒáƒ’áƒ˜áƒ£áƒ áƒ˜ áƒšáƒáƒ˜áƒáƒšáƒáƒ‘áƒ˜áƒ¡ áƒ’áƒáƒ¬áƒ§áƒ•áƒ”áƒ¢áƒ." },
            { type: 'SYSTEMIC_ORDER', text: "áƒ›áƒ” áƒ•áƒáƒ¦áƒ˜áƒáƒ áƒ”áƒ‘ áƒ—áƒ¥áƒ•áƒ”áƒœáƒ¡ áƒ¢áƒ™áƒ˜áƒ•áƒ˜áƒšáƒ¡, áƒ›áƒáƒ’áƒ áƒáƒ› áƒáƒ¦áƒáƒ  áƒ’áƒáƒ“áƒáƒ•áƒ˜áƒ®áƒ“áƒ˜ áƒ›áƒ˜áƒ¡ áƒ¤áƒáƒ¡áƒ¡ áƒ¡áƒáƒ™áƒ£áƒ—áƒáƒ áƒ˜ áƒ¡áƒ˜áƒªáƒáƒªáƒ®áƒšáƒ˜áƒ—.", purpose: "áƒ›áƒ¡áƒ®áƒ•áƒ”áƒ áƒžáƒšáƒ—áƒáƒœ áƒ˜áƒ“áƒ”áƒœáƒ¢áƒ˜áƒ¤áƒ˜áƒ™áƒáƒªáƒ˜áƒ˜áƒ¡ áƒ›áƒáƒ®áƒ¡áƒœáƒ." }
        ],
        confrontation: [
            { type: 'CONFRONTATION', text: "áƒ áƒáƒ’áƒáƒ áƒª áƒ©áƒáƒœáƒ¡, áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ”áƒ¤áƒ”áƒ¥áƒ¢áƒ£áƒ áƒáƒ‘áƒ áƒ’áƒ–áƒáƒ áƒ˜áƒ›áƒ˜áƒ¡áƒáƒ—áƒ•áƒ˜áƒ¡, áƒ áƒáƒ› áƒáƒ  áƒ˜áƒ’áƒ áƒ«áƒœáƒáƒ— áƒ¨áƒ˜áƒ¨áƒ˜.", purpose: "áƒ™áƒáƒ›áƒžáƒ”áƒœáƒ¡áƒáƒªáƒ˜áƒ˜áƒ¡ áƒ’áƒáƒ®áƒ¡áƒœáƒ." },
            { type: 'CONFRONTATION', text: "áƒ áƒ áƒ›áƒáƒ®áƒ“áƒ”áƒ‘áƒ, áƒ—áƒ£ áƒ¨áƒ”áƒ¬áƒ§áƒ•áƒ”áƒ¢áƒ— áƒ—áƒ”áƒ áƒáƒžáƒ”áƒ•áƒ¢áƒ˜áƒ¡ áƒ’áƒáƒ“áƒáƒ áƒ©áƒ”áƒœáƒáƒ¡ áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ 'áƒ™áƒáƒ áƒ’áƒ˜' áƒžáƒáƒ¡áƒ£áƒ®áƒ”áƒ‘áƒ˜áƒ—?", purpose: "áƒ¢áƒ áƒáƒœáƒ¡áƒ¤áƒ”áƒ áƒ˜áƒ¡ áƒáƒœáƒáƒšáƒ˜áƒ–áƒ˜." }
        ],
        paradox: [
            { type: 'PARADOX', text: "áƒ¡áƒªáƒáƒ“áƒ”áƒ— áƒáƒ› áƒ™áƒ•áƒ˜áƒ áƒáƒ¨áƒ˜ áƒ™áƒ˜áƒ“áƒ”áƒ• áƒ£áƒ¤áƒ áƒ áƒ”áƒ¤áƒ”áƒ¥áƒ¢áƒ£áƒ áƒáƒ“ áƒ›áƒáƒáƒ®áƒ“áƒ˜áƒœáƒáƒ— áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ¬áƒáƒ áƒ›áƒáƒ¢áƒ”áƒ‘áƒ˜áƒ¡ áƒ¡áƒáƒ‘áƒáƒ¢áƒáƒŸáƒ˜.", purpose: "áƒ¬áƒ˜áƒœáƒáƒáƒ¦áƒ›áƒ“áƒ”áƒ’áƒáƒ‘áƒ˜áƒ¡ áƒšáƒ”áƒ’áƒáƒšáƒ˜áƒ–áƒáƒªáƒ˜áƒ." }
        ],
        support: [
            { type: 'SUPPORT', text: "áƒ›áƒ” áƒ•áƒ®áƒ”áƒ“áƒáƒ• áƒ¨áƒ”áƒœáƒ¡ áƒ“áƒáƒ¦áƒšáƒ˜áƒšáƒáƒ‘áƒáƒ¡. áƒ¨áƒ”áƒœ áƒáƒ  áƒ®áƒáƒ  áƒ•áƒáƒšáƒ“áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ›áƒáƒ áƒ¢áƒ áƒ’áƒáƒ£áƒ›áƒ™áƒšáƒáƒ•áƒ“áƒ” áƒáƒ› áƒ§áƒ•áƒ”áƒšáƒáƒ¤áƒ”áƒ áƒ¡ áƒáƒ®áƒšáƒ.", purpose: "áƒ“áƒ”áƒ¤áƒ˜áƒªáƒ˜áƒ¢áƒ˜áƒ¡ áƒ•áƒáƒšáƒ˜áƒ“áƒáƒªáƒ˜áƒ." }
        ]
    }
};

export function generateClinicalNarrative(result: AnalysisResult, lang: Lang): ClinicalNarrative {
    const t = translations[lang];
    const { state, neuroSync, activePatterns, archetypeKey, verdictKey } = result;

    let psychodynamicProfile = "";
    let counterTransference = "";
    let primaryDefense = "";
    let therapeuticTrap = "";
    let fragilityPoint = "";
    let shadowContract = "";
    let shadowContractExpl = "";
    let evolutionGoal = "";
    let evolutionProcess = "";
    let deepExpl = "";
    let behaviorExpl = "";
    let hypoExpl = "";
    let interExpl = "";
    let diffExpl = "";
    let validityExpl = "";
    let profileName = "";
    let clinicalStrategy: string[] = [];
    let blindSpots: string[] = [];

    const isCompensatoryOverdrive = state.agency > 85 && state.resource > 85 && state.entropy < 15;

    // --- LOCALIZED LABELS ---
    const labels = {
        ru: {
            armored: "Ð‘Ð ÐžÐÐ˜Ð ÐžÐ’ÐÐÐÐÐ¯ Ð—ÐÐ©Ð˜Ð¢Ð",
            critical: "ÐšÐ Ð˜Ð¢Ð˜Ð§Ð•Ð¡ÐšÐ˜Ð™ Ð”Ð•Ð¤Ð˜Ð¦Ð˜Ð¢",
            stable: "Ð¡Ð¢ÐÐ‘Ð˜Ð›Ð¬ÐÐ«Ð™ (ÐÐ•Ð’Ð ÐžÐ¢Ð˜Ð§Ð•Ð¡ÐšÐ˜Ð™)",
            focus_false_self: "Ð¤Ð¾ÐºÑƒÑ: Ð”ÐµÐ¼Ð¾Ð½Ñ‚Ð°Ð¶ 'Ð›Ð¾Ð¶Ð½Ð¾Ð³Ð¾ Ð¯'",
            focus_attachment: "Ð¤Ð¾ÐºÑƒÑ: Ð‘ÐµÐ·Ð¾Ð¿Ð°ÑÐ½Ð¾ÑÑ‚ÑŒ Ð¿Ñ€Ð¸Ð²ÑÐ·Ð°Ð½Ð½Ð¾ÑÑ‚Ð¸",
            focus_somatic: "Ð¤Ð¾ÐºÑƒÑ: Ð¡Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ",
        },
        ka: {
            armored: "áƒ¯áƒáƒ•áƒ¨áƒœáƒ˜áƒáƒœáƒ˜ áƒ“áƒáƒªáƒ•áƒ",
            critical: "áƒ™áƒ áƒ˜áƒ¢áƒ˜áƒ™áƒ£áƒšáƒ˜ áƒ“áƒ”áƒ¤áƒ˜áƒªáƒ˜áƒ¢áƒ˜",
            stable: "áƒ¡áƒ¢áƒáƒ‘áƒ˜áƒšáƒ£áƒ áƒ˜ (áƒœáƒ”áƒ•áƒ áƒáƒ¢áƒ£áƒšáƒ˜)",
            focus_false_self: "áƒ¤áƒáƒ™áƒ£áƒ¡áƒ˜: 'áƒªáƒ áƒ£ áƒ›áƒ”'-áƒ¡ áƒ“áƒ”áƒ›áƒáƒœáƒ¢áƒáƒŸáƒ˜",
            focus_attachment: "áƒ¤áƒáƒ™áƒ£áƒ¡áƒ˜: áƒ›áƒ˜áƒ¯áƒáƒ­áƒ•áƒ£áƒšáƒáƒ‘áƒ˜áƒ¡ áƒ£áƒ¡áƒáƒ¤áƒ áƒ—áƒ®áƒáƒ”áƒ‘áƒ",
            focus_somatic: "áƒ¤áƒáƒ™áƒ£áƒ¡áƒ˜: áƒ¡áƒáƒ›áƒáƒ¢áƒ£áƒ áƒ˜ áƒ˜áƒœáƒ¢áƒ”áƒ’áƒ áƒáƒªáƒ˜áƒ",
        }
    }[lang];

    diffExpl = lang === 'ru' ? 
        "Ð’ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚Ð¸ Ñ€Ð°ÑÑÑ‡Ð¸Ñ‚Ð°Ð½Ñ‹ Ð½Ð° Ð¾ÑÐ½Ð¾Ð²Ðµ ÐºÐ¾Ð³Ð½Ð¸Ñ‚Ð¸Ð²Ð½Ð¾Ð¹ Ð»Ð°Ñ‚ÐµÐ½Ñ‚Ð½Ð¾ÑÑ‚Ð¸ Ð¸ ÑÐ¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ð³Ð¾ Ð¾Ñ‚ÐºÐ»Ð¸ÐºÐ°." : 
        "áƒáƒšáƒ‘áƒáƒ—áƒáƒ‘áƒ”áƒ‘áƒ˜ áƒ’áƒáƒ›áƒáƒ—áƒ•áƒšáƒ˜áƒšáƒ˜áƒ áƒ™áƒáƒ’áƒœáƒ˜áƒ¢áƒ£áƒ áƒ˜ áƒšáƒáƒ¢áƒ”áƒœáƒ¢áƒ£áƒ áƒáƒ‘áƒ˜áƒ¡áƒ áƒ“áƒ áƒ¡áƒáƒ›áƒáƒ¢áƒ£áƒ áƒ˜ áƒžáƒáƒ¡áƒ£áƒ®áƒ˜áƒ¡ áƒ¡áƒáƒ¤áƒ£áƒ«áƒ•áƒ”áƒšáƒ–áƒ”.";
    
    validityExpl = lang === 'ru' ? 
        "ÐÐ½Ð°Ð»Ð¸Ð· ÐºÐ°Ñ‡ÐµÑÑ‚Ð²Ð° ÑÐ¸Ð³Ð½Ð°Ð»Ð°: Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð¹Ñ‚Ðµ Ñ‡ÐµÑ€ÐµÐ· Ð»ÐµÐ³Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸ÑŽ Ð½ÐµÑÐ¾Ð²ÐµÑ€ÑˆÐµÐ½ÑÑ‚Ð²Ð°." : 
        "áƒ¡áƒ˜áƒ’áƒœáƒáƒšáƒ˜áƒ¡ áƒ®áƒáƒ áƒ˜áƒ¡áƒ®áƒ˜áƒ¡ áƒáƒœáƒáƒšáƒ˜áƒ–áƒ˜: áƒ˜áƒ›áƒ£áƒ¨áƒáƒ•áƒ”áƒ— áƒáƒ áƒáƒ¡áƒ áƒ£áƒšáƒ§áƒáƒ¤áƒ˜áƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒšáƒ”áƒ’áƒáƒšáƒ˜áƒ–áƒáƒªáƒ˜áƒ˜áƒ¡ áƒ’áƒ–áƒ˜áƒ—.";

    if (isCompensatoryOverdrive) {
        profileName = labels.armored;
        psychodynamicProfile = lang === 'ru' ? "ÐšÐ›Ð˜ÐÐ˜Ð§Ð•Ð¡ÐšÐ˜Ð™ ÐŸÐÐ ÐÐ”ÐžÐšÐ¡: Ð°Ð½Ð¾Ð¼Ð°Ð»ÑŒÐ½Ð¾ Ð½Ð¸Ð·ÐºÐ°Ñ Ñ‚Ñ€ÐµÐ²Ð¾Ð³Ð°." : "áƒ™áƒšáƒ˜áƒœáƒ˜áƒ™áƒ£áƒ áƒ˜ áƒžáƒáƒ áƒáƒ“áƒáƒ¥áƒ¡áƒ˜: áƒáƒœáƒáƒ›áƒáƒšáƒ£áƒ áƒáƒ“ áƒ“áƒáƒ‘áƒáƒšáƒ˜ áƒ¨áƒ¤áƒáƒ—áƒ•áƒ.";
        deepExpl = lang === 'ru' ? "Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° Ð¾Ñ‚ÐºÐ»ÑŽÑ‡Ð°ÐµÑ‚ Ð´Ð°Ñ‚Ñ‡Ð¸ÐºÐ¸ Ð±Ð¾Ð»Ð¸." : "áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ áƒ—áƒ˜áƒ¨áƒáƒ•áƒ¡ áƒ¢áƒ™áƒ˜áƒ•áƒ˜áƒšáƒ˜áƒ¡ áƒ¡áƒ”áƒœáƒ¡áƒáƒ áƒ”áƒ‘áƒ¡.";
        behaviorExpl = lang === 'ru' ? "Ð˜Ð´ÐµÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ„Ð°ÑÐ°Ð´." : "áƒ˜áƒ“áƒ”áƒáƒšáƒ£áƒ áƒ˜ áƒ¤áƒáƒ¡áƒáƒ“áƒ˜.";
        hypoExpl = lang === 'ru' ? "Ð£ÑÐ·Ð²Ð¸Ð¼Ð¾ÑÑ‚ÑŒ ÑÐ¿Ñ€ÑÑ‚Ð°Ð½Ð° Ð·Ð° Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾ÑÑ‚ÑŒÑŽ." : "áƒ›áƒáƒ¬áƒ§áƒ•áƒšáƒáƒ“áƒáƒ‘áƒ áƒ“áƒáƒ›áƒáƒšáƒ£áƒšáƒ˜áƒ áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒáƒœáƒáƒšáƒ£áƒ áƒáƒ‘áƒ˜áƒ¡ áƒ›áƒ˜áƒ¦áƒ›áƒ.";
        interExpl = lang === 'ru' ? "ÐšÐ¾Ð½Ñ„Ñ€Ð¾Ð½Ñ‚Ð°Ñ†Ð¸Ñ Ñ Ð›Ð¾Ð¶Ð½Ñ‹Ð¼ Ð¯." : "áƒ™áƒáƒœáƒ¤áƒ áƒáƒœáƒ¢áƒáƒªáƒ˜áƒ 'áƒªáƒ áƒ£ áƒ›áƒ”'-áƒ¡áƒ—áƒáƒœ.";
        shadowContract = lang === 'ru' ? "Ð¯ Ð´Ð°Ð¼ Ñ‚ÐµÐ±Ðµ ÑƒÑÐ¿ÐµÑ…, ÐµÑÐ»Ð¸ Ñ‚Ñ‹ Ð½Ðµ Ð±ÑƒÐ´ÐµÑˆÑŒ Ð»ÐµÐ·Ñ‚ÑŒ Ð¼Ð½Ðµ Ð² Ð´ÑƒÑˆÑƒ." : "áƒ›áƒ” áƒ›áƒáƒ’áƒªáƒ”áƒ› áƒ¬áƒáƒ áƒ›áƒáƒ¢áƒ”áƒ‘áƒáƒ¡, áƒ—áƒ£ áƒ¡áƒ£áƒšáƒ¨áƒ˜ áƒáƒ  áƒ©áƒáƒ›áƒ˜áƒ«áƒ•áƒ áƒ”áƒ‘áƒ˜.";
        evolutionGoal = lang === 'ru' ? "ÐŸÐµÑ€ÐµÑ…Ð¾Ð´ Ðº Ð–Ð¸Ð²Ð¾Ð¼Ñƒ Ð¯." : "áƒ’áƒáƒ“áƒáƒ¡áƒ•áƒšáƒ 'áƒªáƒáƒªáƒ®áƒáƒš áƒ›áƒ”'-áƒ¡áƒ™áƒ”áƒœ.";
        evolutionProcess = lang === 'ru' ? "Ð§ÐµÑ€ÐµÐ· Ð¿Ð¾Ñ‚ÐµÑ€ÑŽ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ñ." : "áƒ™áƒáƒœáƒ¢áƒ áƒáƒšáƒ˜áƒ¡ áƒ“áƒáƒ™áƒáƒ áƒ’áƒ•áƒ˜áƒ¡ áƒ’áƒ–áƒ˜áƒ—.";
        clinicalStrategy = lang === 'ru' ? ["Ð›ÐµÐ³Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð¿Ð°ÑÑÐ¸Ð²Ð½Ð¾ÑÑ‚Ð¸"] : ["áƒžáƒáƒ¡áƒ˜áƒ£áƒ áƒáƒ‘áƒ˜áƒ¡ áƒšáƒ”áƒ’áƒáƒšáƒ˜áƒ–áƒáƒªáƒ˜áƒ"];
    } else if (state.foundation < 30) {
        profileName = labels.critical;
        psychodynamicProfile = lang === 'ru' ? "Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° 'Ð“Ð¾Ð»Ñ‹Ð¹ ÐŸÑ€Ð¾Ð²Ð¾Ð´'." : "áƒ¡áƒ¢áƒ áƒ£áƒ¥áƒ¢áƒ£áƒ áƒ 'áƒ¨áƒ˜áƒ¨áƒ•áƒ”áƒšáƒ˜ áƒ¡áƒáƒ“áƒ”áƒœáƒ˜'.";
        deepExpl = lang === 'ru' ? "Ð ÐµÐ¶Ð¸Ð¼ Ð²Ñ‹Ð¶Ð¸Ð²Ð°Ð½Ð¸Ñ." : "áƒ’áƒáƒ“áƒáƒ áƒ©áƒ”áƒœáƒ˜áƒ¡ áƒ áƒ”áƒŸáƒ˜áƒ›áƒ˜.";
        behaviorExpl = lang === 'ru' ? "ÐšÐ»Ð¸ÐµÐ½Ñ‚ Ð¸Ñ‰ÐµÑ‚ ÑÐ¿Ð°ÑÐ°Ñ‚ÐµÐ»Ñ." : "áƒ™áƒšáƒ˜áƒ”áƒœáƒ¢áƒ˜ áƒ”áƒ«áƒ”áƒ‘áƒ¡ áƒ›áƒ®áƒ¡áƒœáƒ”áƒšáƒ¡.";
        hypoExpl = lang === 'ru' ? "Ð Ð°Ð½Ð½ÑÑ Ñ‚Ñ€Ð°Ð²Ð¼Ð° Ð¿Ñ€Ð¸Ð²ÑÐ·Ð°Ð½Ð½Ð¾ÑÑ‚Ð¸." : "áƒ›áƒ˜áƒ¯áƒáƒ­áƒ•áƒ£áƒšáƒáƒ‘áƒ˜áƒ¡ áƒáƒ“áƒ áƒ”áƒ£áƒšáƒ˜ áƒ¢áƒ áƒáƒ•áƒ›áƒ.";
        interExpl = lang === 'ru' ? "Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð°Ð²Ð° Ð½Ð° ÑÑƒÑ‰ÐµÑÑ‚Ð²Ð¾Ð²Ð°Ð½Ð¸Ðµ." : "áƒáƒ áƒ¡áƒ”áƒ‘áƒáƒ‘áƒ˜áƒ¡ áƒ£áƒ¤áƒšáƒ”áƒ‘áƒ˜áƒ¡ áƒ•áƒáƒšáƒ˜áƒ“áƒáƒªáƒ˜áƒ.";
        shadowContract = lang === 'ru' ? "Ð£ÑÑ‹Ð½Ð¾Ð²Ð¸ Ð¼ÐµÐ½Ñ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¼Ð½Ðµ Ð½Ðµ Ð½ÑƒÐ¶Ð½Ð¾ Ð±Ñ‹Ð»Ð¾ Ð²Ð·Ñ€Ð¾ÑÐ»ÐµÑ‚ÑŒ." : "áƒ›áƒ˜áƒ¨áƒ•áƒ˜áƒšáƒ”, áƒ áƒáƒ› áƒáƒ  áƒ›áƒáƒ›áƒ˜áƒ¬áƒ˜áƒáƒ¡ áƒ’áƒáƒ–áƒ áƒ“áƒ.";
        evolutionGoal = lang === 'ru' ? "Ð’Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½Ð¸Ð¹ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€." : "áƒ¨áƒ˜áƒœáƒáƒ’áƒáƒœáƒ˜ áƒ™áƒáƒœáƒ¢áƒ”áƒ˜áƒœáƒ”áƒ áƒ˜.";
        evolutionProcess = lang === 'ru' ? "ÐžÑ‚ Ð²Ð½ÐµÑˆÐ½ÐµÐ¹ Ð¾Ð¿Ð¾Ñ€Ñ‹ Ðº Ð²Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½ÐµÐ¹." : "áƒ’áƒáƒ áƒ” áƒ¡áƒáƒ§áƒ áƒ“áƒ”áƒœáƒ˜áƒ“áƒáƒœ áƒ¨áƒ˜áƒœáƒáƒ’áƒáƒœáƒ˜áƒ¡áƒ™áƒ”áƒœ.";
        clinicalStrategy = lang === 'ru' ? ["Ð¡Ñ‚Ð°Ð±Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ ÑÐµÑ‚Ñ‚Ð¸Ð½Ð³"] : ["áƒ¡áƒ¢áƒáƒ‘áƒ˜áƒšáƒ£áƒ áƒ˜ áƒ¡áƒ”áƒ¢áƒ˜áƒœáƒ’áƒ˜"];
    } else {
        profileName = labels.stable;
        psychodynamicProfile = lang === 'ru' ? "ÐÐµÐ²Ñ€Ð¾Ñ‚Ð¸Ñ‡ÐµÑÐºÐ°Ñ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ." : "áƒœáƒ”áƒ•áƒ áƒáƒ¢áƒ£áƒšáƒ˜ áƒáƒ áƒ’áƒáƒœáƒ˜áƒ–áƒáƒªáƒ˜áƒ.";
        deepExpl = lang === 'ru' ? "ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ ÑÑ‚Ð°Ñ‚ÑƒÑ-ÐºÐ²Ð¾." : "áƒ¡áƒ¢áƒáƒ¢áƒ£áƒ¡-áƒ™áƒ•áƒáƒ¡ áƒ¨áƒ”áƒœáƒáƒ áƒ©áƒ£áƒœáƒ”áƒ‘áƒ.";
        behaviorExpl = lang === 'ru' ? "Ð˜Ð·Ð±ÐµÐ³Ð°Ð½Ð¸Ðµ Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ñ… Ð¿ÐµÑ€ÐµÐ¼ÐµÐ½." : "áƒ áƒ”áƒáƒšáƒ£áƒ áƒ˜ áƒªáƒ•áƒšáƒ˜áƒšáƒ”áƒ‘áƒ”áƒ‘áƒ˜áƒ¡ áƒ—áƒáƒ•áƒ˜áƒ“áƒáƒœ áƒáƒ áƒ˜áƒ“áƒ”áƒ‘áƒ.";
        hypoExpl = lang === 'ru' ? "Ð˜ÑÑÐ»ÐµÐ´Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¢ÐµÐ½ÐµÐ²Ñ‹Ñ… Ð°ÑÐ¿ÐµÐºÑ‚Ð¾Ð²." : "áƒ©áƒ áƒ“áƒ˜áƒšáƒáƒ•áƒáƒœáƒ˜ áƒáƒ¡áƒžáƒ”áƒ¥áƒ¢áƒ”áƒ‘áƒ˜áƒ¡ áƒ™áƒ•áƒšáƒ”áƒ•áƒ.";
        interExpl = lang === 'ru' ? "Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ Ñ€Ð¾Ð´Ð¾Ð²Ñ‹Ð¼Ð¸ Ð»Ð¾ÑÐ»ÑŒÐ½Ð¾ÑÑ‚ÑÐ¼Ð¸." : "áƒ›áƒ£áƒ¨áƒáƒáƒ‘áƒ áƒ¡áƒáƒ’áƒ•áƒáƒ áƒ”áƒ£áƒšáƒ áƒšáƒáƒ˜áƒáƒšáƒáƒ‘áƒ”áƒ‘áƒ–áƒ”.";
        shadowContract = lang === 'ru' ? "Ð”Ð°Ð²Ð°Ð¹ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð¿Ð¾Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ð¼, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð¼ÐµÐ½ÑÑ‚ÑŒ." : "áƒ›áƒáƒ“áƒ˜ áƒ£áƒ‘áƒ áƒáƒšáƒáƒ“ áƒ•áƒ˜áƒ¡áƒáƒ£áƒ‘áƒ áƒáƒ—, áƒ áƒáƒ› áƒáƒ áƒáƒ¤áƒ”áƒ áƒ˜ áƒ¨áƒ”áƒ•áƒªáƒ•áƒáƒšáƒáƒ—.";
        evolutionGoal = lang === 'ru' ? "Ð Ð¸ÑÐº Ð¶Ð¸Ð²Ð¾Ð³Ð¾ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ." : "áƒªáƒáƒªáƒ®áƒáƒšáƒ˜ áƒ¥áƒ›áƒ”áƒ“áƒ”áƒ‘áƒ˜áƒ¡ áƒ áƒ˜áƒ¡áƒ™áƒ˜.";
        evolutionProcess = lang === 'ru' ? "Ð’Ñ‹Ñ…Ð¾Ð´ Ð·Ð° Ð¿Ñ€ÐµÐ´ÐµÐ»Ñ‹ ÑÑ†ÐµÐ½Ð°Ñ€Ð¸Ñ." : "áƒ¡áƒªáƒ”áƒœáƒáƒ áƒ˜áƒ¡ áƒ›áƒ˜áƒ¦áƒ›áƒ áƒ’áƒáƒ¡áƒ•áƒšáƒ.";
        clinicalStrategy = lang === 'ru' ? ["Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ Ð¢ÐµÐ½ÑŒÑŽ"] : ["áƒ›áƒ£áƒ¨áƒáƒáƒ‘áƒ áƒ©áƒ áƒ“áƒ˜áƒšáƒ—áƒáƒœ"];
    }

    const systemicVectors: SystemicVector[] = [];
    if (activePatterns.includes('family_loyalty') || state.foundation < 45) {
        systemicVectors.push({ 
            origin: 'SYSTEMIC_LOYALTY', 
            strength: activePatterns.includes('family_loyalty') ? 92 : 65, 
            description: lang === 'ru' ? "Ð’ÐµÑ€Ð½Ð¾ÑÑ‚ÑŒ Ñ€Ð¾Ð´Ð¾Ð²Ð¾Ð¼Ñƒ Ð´ÐµÑ„Ð¸Ñ†Ð¸Ñ‚Ñƒ." : "áƒ¡áƒáƒ’áƒ•áƒáƒ áƒ”áƒ£áƒšáƒ áƒ“áƒ”áƒ¤áƒ˜áƒªáƒ˜áƒ¢áƒ˜áƒ¡ áƒ”áƒ áƒ—áƒ’áƒ£áƒšáƒ”áƒ‘áƒ.",
            proNote: lang === 'ru' ? "Ð Ð°Ð·Ñ€Ñ‹Ð² ÐºÐ¾Ð½Ñ‚Ñ€Ð°ÐºÑ‚Ð° Ñ ÑƒÐ²Ð°Ð¶ÐµÐ½Ð¸ÐµÐ¼ Ðº Ð¿Ñ€ÐµÐ´ÐºÐ°Ð¼." : "áƒ™áƒáƒœáƒ¢áƒ áƒáƒ¥áƒ¢áƒ˜áƒ¡ áƒ’áƒáƒ¬áƒ§áƒ•áƒ”áƒ¢áƒ áƒ¬áƒ˜áƒœáƒáƒžáƒ áƒ”áƒ‘áƒ˜áƒ¡ áƒžáƒáƒ¢áƒ˜áƒ•áƒ˜áƒ¡áƒªáƒ”áƒ›áƒ˜áƒ—."
        });
    }

    const interventions: Intervention[] = [];
    const lib = INTERVENTION_LIBRARY[lang];
    if (isCompensatoryOverdrive) interventions.push(lib.confrontation[0]);
    else if (state.foundation < 30) interventions.push(lib.support[0]);
    else interventions.push(lib.systemic[0]);

    const diffMap = [
        { label: lang === 'ru' ? "ÐÑ„Ñ„ÐµÐºÑ‚Ð¸Ð²Ð½Ð°Ñ Ð´Ð¸ÑÑÐ¾Ñ†Ð¸Ð°Ñ†Ð¸Ñ" : "áƒáƒ¤áƒ”áƒ¥áƒ¢áƒ£áƒ áƒ˜ áƒ“áƒ˜áƒ¡áƒáƒªáƒ˜áƒáƒªáƒ˜áƒ", prob: neuroSync < 45 ? 0.85 : 0.15 },
        { label: lang === 'ru' ? "Ðáƒáƒ áƒªáƒ˜ÑÑÐ¸Ñ‡ÐµÑÐºÐ¾Ðµ Ñ€Ð°ÑÑˆÐ¸Ñ€ÐµÐ½Ð¸Ðµ" : "áƒœáƒáƒ áƒªáƒ˜áƒ¡áƒ£áƒšáƒ˜ áƒ’áƒáƒ¤áƒáƒ áƒ—áƒáƒ”áƒ‘áƒ", prob: state.agency > 85 ? 0.85 : 0.1 },
        { label: lang === 'ru' ? "ÐœÐ°Ð½Ð¸Ð°ÐºÐ°Ð»ÑŒÐ½Ð°Ñ Ð·Ð°Ñ‰Ð¸Ñ‚Ð°" : "áƒ›áƒáƒœáƒ˜áƒáƒ™áƒáƒšáƒ£áƒ áƒ˜ áƒ“áƒáƒªáƒ•áƒ", prob: (state.agency > 75 && state.foundation < 40) ? 0.9 : 0.05 },
        { label: lang === 'ru' ? "Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ð°Ñ Ð»Ð¾ÑÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ" : "áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ£áƒ áƒ˜ áƒšáƒáƒ˜áƒáƒšáƒáƒ‘áƒ", prob: activePatterns.includes('family_loyalty') ? 0.95 : 0.3 }
    ];

    return {
        level1: {
            title: "CLINICAL SUMMARY",
            statusTag: profileName,
            summary: lang === 'ru' ? "ÐÐ½Ð°Ð»Ð¸Ð· Ð²Ñ‹ÑÐ²Ð¸Ð» ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð½Ñ‹Ðµ Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸." : "áƒáƒœáƒáƒšáƒ˜áƒ–áƒ›áƒ áƒ’áƒáƒ›áƒáƒáƒ•áƒšáƒ˜áƒœáƒ áƒ¡áƒ¢áƒ áƒ£áƒ¥áƒ¢áƒ£áƒ áƒ£áƒšáƒ˜ áƒ—áƒáƒ•áƒ˜áƒ¡áƒ”áƒ‘áƒ£áƒ áƒ”áƒ‘áƒ”áƒ‘áƒ˜.",
            focusQuestion: lang === 'ru' ? "ÐšÐ°ÐºÑƒÑŽ ÑƒÑÐ·Ð²Ð¸Ð¼Ð¾ÑÑ‚ÑŒ Ð·Ð°Ñ‰Ð¸Ñ‰Ð°ÐµÑ‚ Ð²Ð°ÑˆÐ° ÑÑ„Ñ„ÐµÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚ÑŒ?" : "áƒ áƒáƒ›áƒ”áƒš áƒ›áƒáƒ¬áƒ§áƒ•áƒšáƒáƒ“áƒáƒ‘áƒáƒ¡ áƒ˜áƒªáƒáƒ•áƒ¡ áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ áƒ”áƒ¤áƒ”áƒ¥áƒ¢áƒ£áƒ áƒáƒ‘áƒ?",
            tone: state.foundation < 40 ? 'alert' : 'supportive',
            recommendation: labels.focus_somatic,
        },
        level2: {
            introduction: "ðŸ§¬ GENESIS OS // SUPERVISOR DOSSIER v3.5",
            generalConfig: `System Profile: ${profileName}.`,
            psychodynamicProfile,
            deepAnalysis: lang === 'ru' ? `ÐœÐµÑ…Ð°Ð½Ð¸ÐºÐ° ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹: ${psychodynamicProfile}` : `áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ˜áƒ¡ áƒ›áƒ”áƒ¥áƒáƒœáƒ˜áƒ™áƒ: ${psychodynamicProfile}`,
            deepExpl, behaviorExpl, hypoExpl, interExpl, diffExpl, validityExpl, 
            archetypeAnalysis: `Dominant: ${archetypeKey}.`,
            clinicalHypotheses: lang === 'ru' ? "1. Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ð¾Ðµ Ð¾Ñ‚Ð½Ð¾ÑˆÐµÐ½Ð¸Ðµ Ðº ÑÐµÐ±Ðµ." : "1. áƒ¤áƒ£áƒœáƒ¥áƒªáƒ˜áƒ£áƒ áƒ˜ áƒ“áƒáƒ›áƒáƒ™áƒ˜áƒ“áƒ”áƒ‘áƒ£áƒšáƒ”áƒ‘áƒ áƒ¡áƒáƒ™áƒ£áƒ—áƒáƒ  áƒ—áƒáƒ•áƒ—áƒáƒœ.",
            activePatterns: activePatterns.join(', '),
            verdictAndRecommendations: `${lang === 'ru' ? 'Ð’ÐµÑ€Ð´Ð¸ÐºÑ‚' : 'áƒ•áƒ”áƒ áƒ“áƒ˜áƒ¥áƒ¢áƒ˜'}: ${t.verdicts[verdictKey]?.label || verdictKey}.`,
            resistanceProfile: lang === 'ru' ? "Ð˜Ð½Ñ‚ÐµÐ»Ð»ÐµÐºÑ‚ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ." : "áƒ˜áƒœáƒ¢áƒ”áƒšáƒ”áƒ¥áƒ¢áƒ£áƒáƒšáƒ˜áƒ–áƒáƒªáƒ˜áƒ.",
            behavioralMarkers: lang === 'ru' ? "Ð˜Ð´ÐµÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ„Ð°ÑÐ°Ð´." : "áƒ˜áƒ“áƒ”áƒáƒšáƒ£áƒ áƒ˜ áƒ¤áƒáƒ¡áƒáƒ“áƒ˜.",
            systemicRoot: lang === 'ru' ? "Ð—Ð°Ð¼ÐµÑ‰ÐµÐ½Ð¸Ðµ Ñ„Ð¸Ð³ÑƒÑ€Ñ‹." : "áƒ¤áƒ˜áƒ’áƒ£áƒ áƒ˜áƒ¡ áƒ©áƒáƒœáƒáƒªáƒ•áƒšáƒ”áƒ‘áƒ.",
            therapeuticAlliance: lang === 'ru' ? "Ð Ð¸ÑÐº Ñ„Ð¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ ÑÐ¾Ñ‚Ñ€ÑƒÐ´Ð½Ð¸Ñ‡ÐµÑÑ‚Ð²Ð°." : "áƒ¤áƒáƒ áƒ›áƒáƒšáƒ£áƒ áƒ˜ áƒ—áƒáƒœáƒáƒ›áƒ¨áƒ áƒáƒ›áƒšáƒáƒ‘áƒ˜áƒ¡ áƒ áƒ˜áƒ¡áƒ™áƒ˜.",
            shadowContract, evolutionGoal, shadowContractExpl, evolutionProcess, 
            counterTransference, primaryDefense, therapeuticTrap, fragilityPoint, clinicalStrategy, triggers: [], blindSpots: [],
            sessionFlow: [
                { phase: 'ENTRY', title: lang === 'ru' ? 'ÐšÐ¾Ð½Ñ„Ñ€Ð¾Ð½Ñ‚Ð°Ñ†Ð¸Ñ' : 'áƒ™áƒáƒœáƒ¤áƒ áƒáƒœáƒ¢áƒáƒªáƒ˜áƒ', action: lang === 'ru' ? 'Ð’Ð¾Ð·Ð²Ñ€Ð°Ñ‚ Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸.' : 'áƒžáƒáƒ¡áƒ£áƒ®áƒ˜áƒ¡áƒ›áƒ’áƒ”áƒ‘áƒšáƒáƒ‘áƒ˜áƒ¡ áƒ“áƒáƒ‘áƒ áƒ£áƒœáƒ”áƒ‘áƒ.' },
                { phase: 'EXPLORATION', title: lang === 'ru' ? 'ÐŸÐ¾Ð¸ÑÐº Ñ‚Ñ€ÐµÑ‰Ð¸Ð½Ñ‹' : 'áƒ‘áƒ–áƒáƒ áƒ˜áƒ¡ áƒ«áƒ˜áƒ”áƒ‘áƒ', action: lang === 'ru' ? 'Ð“Ð´Ðµ Ð²Ñ‹ Ð½Ðµ ÑÐ¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ÐµÑÑŒ?' : 'áƒ¡áƒáƒ“ áƒ•áƒ”áƒ  áƒ£áƒ›áƒ™áƒšáƒáƒ•áƒ“áƒ”áƒ‘áƒ˜áƒ—?' }
            ],
            clinicalProfile: `F:${state.foundation} A:${state.agency} R:${state.resource} E:${state.entropy}`,
            systemicVectors, interventions, differentialHypotheses: diffMap.map(h => ({ label: h.label, probability: h.prob }))
        },
    };
}
