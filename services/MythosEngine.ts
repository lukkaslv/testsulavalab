
import { AnalysisResult } from '../types';

export interface –ú–∏—Ñ {
    –∫–æ—Ä–µ–Ω—å: string;
    –≤—ã–∑–æ–≤: string;
    –ø–æ—Ä–æ–≥: string;
    —Å–∏–º–≤–æ–ª: string;
}

/**
 * –Ø–î–†–û –ú–ò–§–û–î–ò–ó–ê–ô–ù–ê v1.0
 * –°–±–æ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ –Ω–∞—Ä—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –æ—Ç—Ä–∞–∂–µ–Ω–∏—è (–°—Ç. 4.1)
 */
export const MythosEngine = {
    —Å–æ–±—Ä–∞—Ç—å(—Ä–µ–∑—É–ª—å—Ç–∞—Ç: AnalysisResult): –ú–∏—Ñ {
        const { foundation: f, agency: a, resource: r, entropy: e } = —Ä–µ–∑—É–ª—å—Ç–∞—Ç.state;
        const —Å–≤—è–∑—å = —Ä–µ–∑—É–ª—å—Ç–∞—Ç.neuroSync;
        const —Ç–µ–Ω—å = —Ä–µ–∑—É–ª—å—Ç–∞—Ç.shadowArchetype?.key || 'THE_DRIFTER';

        // 1. –ö–æ—Ä–µ–Ω—å (–û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –û–ø–æ—Ä–µ)
        let –∫–æ—Ä–µ–Ω—å = "–í–∞—à —Å–∞–¥ –∑–∞—Ä–æ—Å —Ç–µ—Ä–Ω–æ–≤–Ω–∏–∫–æ–º, —Å–∫—Ä—ã–≤–∞—é—â–∏–º —Å—Ç–∞—Ä—ã–µ –∫–∞–º–Ω–∏.";
        if (f > 75) –∫–æ—Ä–µ–Ω—å = "–í—ã —Å—Ç–æ–∏—Ç–µ –Ω–∞ –º–æ–Ω–æ–ª–∏—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–Ω–∏—Ç –Ω–∞—á–∞–ª–æ –≤—Ä–µ–º–µ–Ω.";
        else if (f > 45) –∫–æ—Ä–µ–Ω—å = "–í–∞—à–∞ –∑–µ–º–ª—è –ø–ª–æ–¥–æ—Ä–æ–¥–Ω–∞, –Ω–æ –æ–≥—Ä–∞–¥—ã –µ—â–µ —Ö—Ä—É–ø–∫–∏.";
        else if (f < 25) –∫–æ—Ä–µ–Ω—å = "–í—ã –ø—ã—Ç–∞–µ—Ç–µ—Å—å —Å—Ç—Ä–æ–∏—Ç—å –º–æ—Å—Ç –Ω–∞–¥ –±–µ–∑–¥–Ω–æ–π –∏–∑ –ø–∞–≤—à–∏—Ö –ª–∏—Å—Ç—å–µ–≤.";

        // 2. –í—ã–∑–æ–≤ (–í–æ–ª—è + –•–∞–æ—Å)
        let –≤—ã–∑–æ–≤ = "–í–µ—Ç–µ—Ä –ø–µ—Ä–µ–º–µ–Ω —Å–ª–∏—à–∫–æ–º —Å–ª–∞–±, —á—Ç–æ–±—ã –Ω–∞–¥—É—Ç—å –≤–∞—à–∏ –ø–∞—Ä—É—Å–∞.";
        if (a > 75 && e < 35) –≤—ã–∑–æ–≤ = "–í–∞—à–∞ –≤–æ–ª—è –ø–æ–¥–æ–±–Ω–∞ –ª—É—á—É —Å–≤–µ—Ç–∞, —Ä–∞–∑—Ä–µ–∑–∞—é—â–µ–º—É –º—Ä–∞–∫ –±–µ–∑ –∫–æ–ª–µ–±–∞–Ω–∏–π.";
        else if (a > 70 && e > 60) –≤—ã–∑–æ–≤ = "–í—ã –º–µ—á–µ—Ç–µ –º–æ–ª–Ω–∏–∏ –≤ –≥—Ä–æ–∑–æ–≤–æ–º –æ–±–ª–∞–∫–µ, —Å–∂–∏–≥–∞—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å.";
        else if (a < 40 && e > 50) –≤—ã–∑–æ–≤ = "–í—ã –∏—â–µ—Ç–µ –∫–ª—é—á –æ—Ç –¥–≤–µ—Ä–∏, –∫–æ—Ç–æ—Ä–∞—è –¥–∞–≤–Ω–æ –æ—Ç–∫—Ä—ã—Ç–∞, –Ω–æ —Å–∫—Ä—ã—Ç–∞ –≤ —Ç—É–º–∞–Ω–µ.";

        // 3. –ü–æ—Ä–æ–≥ (–°–≤—è–∑—å + –¢–µ–Ω—å)
        let –ø–æ—Ä–æ–≥ = "–í–∞—à–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ –≤ –≤–æ–¥–µ –¥—Ä–æ–∂–∏—Ç, –Ω–µ –ø–æ–∑–≤–æ–ª—è—è —É–∑–Ω–∞—Ç—å —Å–µ–±—è.";
        if (—Å–≤—è–∑—å > 80) –ø–æ—Ä–æ–≥ = "–®–µ–ø–æ—Ç –≤–∞—à–µ–≥–æ —Ç–µ–ª–∞ ‚Äî —ç—Ç–æ —è—Å–Ω–∞—è –ø–µ—Å–Ω—è, –≤–µ–¥—É—â–∞—è –¥–æ–º–æ–π.";
        else if (—Å–≤—è–∑—å < 35) –ø–æ—Ä–æ–≥ = "–í–∞—à–∞ —Ç–µ–Ω—å –æ–±—Ä–µ–ª–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –≥–æ–ª–æ—Å, –ø–æ–∫–∞ –≤—ã —Ö—Ä–∞–Ω–∏–ª–∏ –º–æ–ª—á–∞–Ω–∏–µ.";
        
        const —Å–∏–º–≤–æ–ª—ã: Record<string, string> = {
            THE_ARCHITECT: "üìê",
            THE_DRIFTER: "üçÇ",
            THE_BURNED_HERO: "üî•",
            THE_GOLDEN_PRISONER: "üèÜ",
            THE_CHAOS_SURFER: "üåä",
            THE_GUARDIAN: "üõ°Ô∏è"
        };

        return {
            –∫–æ—Ä–µ–Ω—å,
            –≤—ã–∑–æ–≤,
            –ø–æ—Ä–æ–≥,
            —Å–∏–º–≤–æ–ª: —Å–∏–º–≤–æ–ª—ã[—Ä–µ–∑—É–ª—å—Ç–∞—Ç.archetypeKey] || "üóùÔ∏è"
        };
    }
};
