
import { AnalysisResult } from '../types';

export interface Притча {
    id: string;
    уровеньКод: string;
    название: string;
    содержание: string;
    целевойУровень: string;
    ключСвязи: string;
}

/**
 * РЕЕСТР «СЛОВО» v3.0
 * Детерминированные нарративы, разворачивающие Аксиомы Генезиса.
 */
export const ParableRegistry: Притча[] = [
    {
        id: "П_ИС",
        уровеньКод: "ИС",
        название: "Тишина перед первым вдохом",
        содержание: "Мастер спросил ученика: 'Где рождается твой ответ?'. Ученик начал объяснять свои мысли, но Мастер прервал его: 'Это уже эхо. Я спрашиваю о моменте до звука'. Притча учит, что истина Генезиса — в тех миллисекундах латентности, когда тело уже знает ответ, а ум еще не успел его подделать.",
        целевойУровень: "ИСТОК",
        ключСвязи: "Связь с Аксиомой ИС1 (Первичный Импульс)"
    },
    {
        id: "П_НЧ",
        уровеньКод: "НЧ",
        название: "Дерево и его невидимый двойник",
        содержание: "Одно дерево гордилось своей кроной, пока не пришла засуха. Крона высохла, но дерево выжило. 'Меня спасло то, чего вы не видели', — прошептало оно ветру. — 'Мои корни так же глубоки, как высота моих ветвей'. Эта метафора раскрывает структуру личности: социальный успех держится на невидимом фундаменте Опор.",
        целевойУровень: "НАЧАЛА",
        ключСвязи: "Связь с Аксиомой НЧ2 (Вертикаль Смысла)"
    },
    {
        id: "П_ТН",
        уровеньКод: "ТН",
        название: "Тень в запертой комнате",
        содержание: "Человек запер свою тень в подвале, считая её уродливой. Со временем он стал слабеть, а в доме поселился холод. Когда он наконец открыл дверь, тень вышла и обняла его, вернув ему утраченную силу. Генезис видит в вашей тени не врага, а ресурс, который система заставляет вас тратить на удержание замков.",
        целевойУровень: "ТЕНЬ",
        ключСвязи: "Связь с Аксиомой ТН1 (Импульс Жизни)"
    },
    {
        id: "П_ЗК",
        уровеньКод: "ЗК",
        название: "Граница океана",
        содержание: "Океан спросил Берег: 'Зачем ты ограничиваешь меня своими песками?'. Берег ответил: 'Без меня ты был бы просто огромной лужей, не знающей своей глубины. Моя жесткость — это твоя форма'. Суверенитет и Законы личности — это не оковы, а условия, в которых энергия становится силой.",
        целевойУровень: "ЗАКОНЫ",
        ключСвязи: "Связь с Аксиомой ЗК1 (Закон Дифференциации)"
    },
    {
        id: "П_ПЛ",
        уровеньКод: "ПЛ",
        название: "Нити невидимой сети",
        содержание: "Паук сплел сеть и уснул. Каждое движение мухи в одном углу отзывалось дрожью в другом. Паук думал, что он — центр мира, пока не понял, что он сам — лишь одна из нитей, по которым течет общее напряжение. Системное поле связывает нас с родом: ваша боль может быть лишь эхом чужого движения.",
        целевойУровень: "ПОЛЕ",
        ключСвязи: "Связь с Аксиомой ПЛ2 (Резонансная Сцепка)"
    },
    {
        id: "П_ТР",
        уровеньКод: "ТР",
        название: "Разрыв кокона",
        содержание: "Гусеница думала, что мир рушится, когда её оболочка начала трескаться. Она боролась за старую форму, пока не поняла, что хаос распада — это цена за полет. Трансформация в Генезисе всегда сопровождается ростом энтропии. Если вам кажется, что вы распадаетесь, возможно, вы просто перерождаетесь.",
        целевойУровень: "СДВИГ",
        ключСвязи: "Связь с Аксиомой ТР2 (Принцип Жертвы Формой)"
    },
    {
        id: "П_СН",
        уровеньКод: "СН",
        название: "Чистое Зеркало",
        содержание: "Ученик долго полировал зеркало, чтобы увидеть в нем Бога. Мастер подошел и разбил зеркало. В каждом осколке отразилось небо. 'Ты искал форму, а нужно было искать прозрачность', — сказал он. Синтез наступает тогда, когда вы перестаете защищать свое 'Я' и становитесь чистым проводником Жизни.",
        целевойУровень: "СИНТЕЗ",
        ключСвязи: "Связь с Аксиомой СН5 (Закон Финальной Прозрачности)"
    },
    {
        id: "П_ЦЛ",
        уровеньКод: "ЦЛ",
        название: "Путь ручья",
        содержание: "Ручей встретил камень. Он не пытался стать камнем или сломать его. Он просто обтек его, сохранив свою воду. Камень стал частью его красоты, а не его преградой. Целостность — это не отсутствие препятствий, а способность системы включать любой опыт в свой поток, не теряя направления.",
        целевойУровень: "ЦЕЛОСТНОСТЬ",
        ключСвязи: "Связь с Аксиомой ЦЛ1 (Динамический Гомеостаз)"
    },
    {
        id: "П_СВ",
        уровеньКод: "СВ",
        название: "Маяк в тумане",
        содержание: "Маяк светил не для того, чтобы корабли его благодарили, а потому что в нем горел огонь. Он не выбирал, кому светить. Когда целостная система отдает избыток энергии миру, она не пустеет, а становится ориентиром для всей Сверхсистемы. Ваш вклад — это естественное следствие вашей завершенности.",
        целевойУровень: "ВНЕШНЕЕ",
        ключСвязи: "Связь с Аксиомой СВ1 (Закон Избыточного Вклада)"
    },
    {
        id: "П_МС",
        уровеньКод: "МС",
        название: "Тот, кто смотрит",
        содержание: "В конце пути странник пришел к последней двери. На ней было написано: 'Оставь здесь всё, что ты о себе знаешь'. Он оставил имя, заслуги и страхи. Дверь открылась, и он увидел не Бога, а Зеркало, в котором не было его отражения — только бесконечный свет потенциала. Вы — не ваши цифры. Вы — Свидетель процесса.",
        целевойУровень: "ПРЕДЕЛ",
        ключСвязи: "Связь с Аксиомой МС5 (Предел Сингулярности)"
    }
];

export const ParableEngine = {
    suggest(result: AnalysisResult): Притча {
        const { foundation: f, entropy: e } = result.state;
        if (f < 35) return ParableRegistry.find(p => p.уровеньКод === 'ИС')!;
        if (e > 65) return ParableRegistry.find(p => p.уровеньКод === 'ТР')!;
        const index = result.shareCode.length % ParableRegistry.length;
        return ParableRegistry[index];
    }
};
